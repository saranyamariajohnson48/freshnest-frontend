import{u as N,r as n,j as e,F as b,a as f,b as y,c as w}from"./index-DWA34nyN.js";import{o as c}from"./orderService-BlMie31S.js";function I(){const{success:x,error:i}=N(),[m,d]=n.useState([]),[r,p]=n.useState("Pending"),u=async()=>{try{const s=await c.list(r==="all"?{}:{status:r});d(s.data||s.orders||[])}catch(s){i(s.message||"Failed to load orders")}};n.useEffect(()=>{u()},[r]);const h=async s=>{try{const t=await c.review(s,"approve");d(l=>l.map(a=>a._id===s?t.data:a)),x("Order approved")}catch(t){i(t.message||"Approve failed")}},j=async s=>{try{const t=await c.review(s,"reject");d(l=>l.map(a=>a._id===s?t.data:a)),x("Order rejected")}catch(t){i(t.message||"Reject failed")}},v=async s=>{try{const t=await c.confirmDelivery(s);d(l=>l.map(a=>a._id===s?t.data:a)),x("Delivery confirmed")}catch(t){i(t.message||"Confirm failed")}},o=n.useMemo(()=>r==="all"?m:m.filter(s=>s.status===r),[m,r]),g=s=>{switch(s){case"Pending":return"bg-amber-50 text-amber-700";case"Approved":return"bg-blue-50 text-blue-700";case"In Transit":return"bg-indigo-50 text-indigo-700";case"Delivered":return"bg-emerald-50 text-emerald-700";case"Rejected":return"bg-red-50 text-red-700";default:return"bg-slate-100 text-slate-700"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Supplier Orders"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Review and manage orders from suppliers"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:r,onChange:s=>p(s.target.value),className:"appearance-none bg-white border border-slate-300 rounded-lg px-4 py-2 pr-8",children:[e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Approved",children:"Approved"}),e.jsx("option",{value:"In Transit",children:"In Transit"}),e.jsx("option",{value:"Delivered",children:"Delivered"}),e.jsx("option",{value:"Rejected",children:"Rejected"}),e.jsx("option",{value:"all",children:"All"})]}),e.jsx(b,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400"})]})]}),e.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[o.map(s=>e.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-5 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-slate-500",children:["Order #",s._id.slice(-6)]}),e.jsx("div",{className:"font-semibold text-slate-900",children:s.supplierId?.fullName||"-"}),e.jsx("div",{className:"text-xs text-slate-500",children:s.supplierId?.email||"-"})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${g(s.status)}`,children:s.status})]}),e.jsxs("div",{className:"mt-4 space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Product:"})," ",e.jsx("span",{className:"text-slate-900",children:s.product||"-"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Category:"})," ",e.jsx("span",{className:"text-slate-900",children:s.category||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Brand:"})," ",e.jsx("span",{className:"text-slate-900",children:s.brand||"-"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Notes:"})," ",e.jsx("span",{className:"text-slate-900",children:s.notes||"-"})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-slate-50 rounded-lg p-2",children:[e.jsx("div",{className:"text-slate-500 text-xs",children:"Quantity"}),e.jsx("div",{className:"text-slate-900 font-medium",children:s.quantity})]}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-2",children:[e.jsx("div",{className:"text-slate-500 text-xs",children:"Unit Price"}),e.jsx("div",{className:"text-slate-900 font-medium",children:typeof s.pricePerQuantity=="number"?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(s.pricePerQuantity):"-"})]}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-2",children:[e.jsx("div",{className:"text-slate-500 text-xs",children:"Total"}),e.jsx("div",{className:"text-slate-900 font-semibold",children:typeof s.pricePerQuantity=="number"&&typeof s.quantity=="number"?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(s.pricePerQuantity*s.quantity):"-"})]}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-2",children:[e.jsx("div",{className:"text-slate-500 text-xs",children:"Expected"}),e.jsx("div",{className:"text-slate-900 font-medium",children:s.expectedDelivery?new Date(s.expectedDelivery).toLocaleDateString():"-"})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[s.status==="Pending"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>h(s._id),className:"px-3 py-1 text-xs bg-emerald-50 text-emerald-700 rounded inline-flex items-center gap-1",children:[e.jsx(f,{}),"Approve"]}),e.jsxs("button",{onClick:()=>j(s._id),className:"px-3 py-1 text-xs bg-red-50 text-red-700 rounded inline-flex items-center gap-1",children:[e.jsx(y,{}),"Reject"]})]}),s.status==="Delivered"&&!s.adminConfirmed&&e.jsxs("button",{onClick:()=>v(s._id),className:"px-3 py-1 text-xs bg-blue-50 text-blue-700 rounded inline-flex items-center gap-1",children:[e.jsx(w,{}),"Confirm"]})]})]},s._id)),o.length===0&&e.jsx("div",{className:"col-span-full text-center text-slate-500 py-8",children:"No orders"})]})})]})}export{I as default};
