import{u as y,r as a,j as e,F as N}from"./index-DWA34nyN.js";import{o}from"./orderService-BlMie31S.js";function g(){const{success:u,error:d}=y(),[l,i]=a.useState([]),[t,p]=a.useState("In Transit"),h=async()=>{try{const s=await o.list(t==="all"?{}:{status:t});i(s.data||s.orders||[])}catch(s){d(s.message||"Failed to load deliveries")}};a.useEffect(()=>{h()},[t]);const n=async(s,m)=>{try{const r=await o.updateStatus(s,m);i(j=>j.map(x=>x._id===s?r.data:x)),u("Status updated")}catch(r){d(r.message||"Failed to update status")}},c=a.useMemo(()=>t==="all"?l:l.filter(s=>s.status===t),[l,t]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Delivery Updates"}),e.jsx("p",{className:"text-slate-700 text-sm",children:"Mark shipments In Transit or Delivered"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:t,onChange:s=>p(s.target.value),className:"appearance-none bg-white border border-slate-300 rounded-lg px-4 py-2 pr-8 text-slate-800",children:[e.jsx("option",{value:"In Transit",children:"In Transit"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Delivered",children:"Delivered"}),e.jsx("option",{value:"all",children:"All"})]}),e.jsx(N,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400"})]})]}),e.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl p-6 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-slate-700",children:[e.jsx("th",{className:"py-2",children:"Order ID"}),e.jsx("th",{className:"py-2",children:"Product"}),e.jsx("th",{className:"py-2",children:"Qty"}),e.jsx("th",{className:"py-2",children:"Status"}),e.jsx("th",{className:"py-2",children:"Expected"}),e.jsx("th",{className:"py-2",children:"Actions"})]})}),e.jsxs("tbody",{children:[c.map(s=>e.jsxs("tr",{className:"border-t border-slate-200 text-slate-800",children:[e.jsx("td",{className:"py-2",children:s._id.slice(-6)}),e.jsx("td",{className:"py-2",children:s.product}),e.jsx("td",{className:"py-2",children:s.quantity}),e.jsx("td",{className:"py-2",children:s.status}),e.jsx("td",{className:"py-2",children:s.expectedDelivery?new Date(s.expectedDelivery).toLocaleDateString():"-"}),e.jsxs("td",{className:"py-2 space-x-2",children:[s.status==="Pending"&&e.jsx("button",{onClick:()=>n(s._id,"In Transit"),className:"px-3 py-1 text-xs bg-blue-50 text-blue-700 rounded",children:"Mark In Transit"}),s.status==="In Transit"&&e.jsx("button",{onClick:()=>n(s._id,"Delivered"),className:"px-3 py-1 text-xs bg-emerald-50 text-emerald-700 rounded",children:"Mark Delivered"})]})]},s._id)),c.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center text-slate-700 py-8",children:"No deliveries found"})})]})]})})]})}export{g as default};
